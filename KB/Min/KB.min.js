var CreateKB=function(){function q(){function a(){var l=function(e,l,b,a,d,c){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=b;this.oldValue=a;this.target=e;this.attr=l;this.arguments=d;this.action=c},b=function(e,b,a,d,c){a=new l(e,b,a,d,c);d=!0;if(void 0!==n[b])for(f=0;f<n[b].length;f+=1){n[b][f].call(e,a);if(a._stopPropogation)return d;a._preventDefault&&(d=!1)}if(void 0!==e.kb_attrListeners&&void 0!==e.kb_attrListeners[b])for(f=
0;f<e.kb_attrListeners[b].length;f+=1){e.kb_attrListeners[b][f].call(e,a);if(a._stopPropogation)break;a._preventDefault&&(d=!1)}return d},d=function(e,a,b,d,c,f){b=new l(e,a,b,d,c,f);d=!0;if(void 0!==p[a])for(c=0;c<p[a].length;c+=1){p[a][c].call(e,b);if(b._stopPropogation)return d;b._preventDefault&&(d=!1)}if(void 0!==e.kb_attrUpdateListeners&&void 0!==e.kb_attrUpdateListeners[a])for(c=0;c<e.kb_attrUpdateListeners[a].length;c+=1){e.kb_attrUpdateListeners[a][c].call(e,b);if(b._stopPropogation)break;
b._preventDefault&&(d=!1)}return d},m=function(){for(var e=0,b=Array.prototype.slice.call(document.getElementsByTagName("INPUT")).filter(function(e){return"radio"!==e.type&&"checkbox"!==e.type}).concat(Array.prototype.slice.call(document.getElementsByTagName("TEXTAREA"))),a=Array.prototype.slice.call(document.getElementsByTagName("INPUT")).filter(function(e){return"radio"===e.type||"checkbox"===e.type}),e=0;e<b.length;e++)void 0===b[e].kb_onkeydown&&b[e].kb_addInputBinding();for(e=0;e<a.length;e++)void 0===
a[e].kb_onmousedown&&a[e].kb_addInputBoxBinding()},g=function(e){var b=new l(e.target,e.arguments[0],"setAttribute"===e.attr?e.arguments[1]:"",e.target.getAttribute(e.arguments[0]),"setAttribute"===e.attr?[e.arguments[1]]:[""]);if(void 0!==n[b.attr])for(f=0;f<n[b.attr].length;f+=1)n[b.attr][f].call(b.target,b),b._stopPropogation&&e.stopPropagation(),b._preventDefault&&e.preventDefault()},k=function(b){var a=new l(b.target,b.arguments[0],"setAttribute"===b.attr?b.arguments[1]:"",b.target.getAttribute(b.arguments[0]),
"setAttribute"===b.attr?[b.arguments[1]]:[""]);if(void 0!==p[a.attr])for(f=0;f<p[a.attr].length;f+=1)p[a.attr][f].call(a.target,a),a._stopPropogation&&b.stopPropagation()};a.injectPrototypes(HTMLInputElement,b,d);a.injectPrototypes(HTMLTextAreaElement,b,d);a.injectPrototypes(Node,b,d);a.injectPrototypes(Element,b,d);a.injectPrototypes(HTMLElement,b,d);a.injectPrototypes(Document,b,d);var h=Object.keys(c);for(f=0;f<h.length;f++)void 0===c[h[f]].set&&a.injectPrototypes(c[h[f]].obj,b,d);Object.keys(c).forEach(function(b,
a){});a.addAttrUpdateListener("appendChild",m);a.addAttrUpdateListener("removeChild",m);a.addAttrUpdateListener("innerHTML",m);a.addAttrUpdateListener("outerHTML",m);a.addAttrUpdateListener("innerText",m);a.addAttrUpdateListener("outerText",m);a.addAttrUpdateListener("textContent",m);a.addAttrListener("setAttribute",g);a.addAttrListener("removeAttribute",g);a.addAttrUpdateListener("setAttribute",k);a.addAttrUpdateListener("removeAttribute",k);m()}var n={},p={},c={},f;a.injectPrototypeProperty=function(l,
b,d,f){var g=l.prototype,k=Object.getOwnPropertyDescriptor(g,b),h=l.toString().split(/\s+/)[1].split("{")[0].replace("()","");void 0===g.addAttrListener&&void 0===g.kb_attrListeners&&(g.kb_attrListeners={},g.addAttrListener=a.addAttrListener,g.removeAttrListener=a.removeAttrListener);void 0===g.addAttrUpdateListener&&void 0===g.kb_attrUpdateListeners&&(g.kb_attrUpdateListeners={},g.addAttrUpdateListener=a.addAttrUpdateListener,g.removeAttrUpdateListener=a.removeAttrUpdateListener);void 0===c[h]&&
(c[h]={obj:l,proto:g,descriptors:{},set:void 0,update:void 0});c[h].set=void 0!==d?d:c[h].set;c[h].update=void 0!==f?f:c[h].update;c[h].descriptors[b]=k;void 0!==k.set&&k.configurable?Object.defineProperty(g,b,{get:k.get,set:function(a){var d=k.get.apply(this);"function"==typeof c[h].set&&c[h].set(this,b,a,d,arguments)&&k.set.apply(this,arguments);"function"===typeof c[h].update&&c[h].update(this,b,a,d)},enumerable:!0,configurable:!0}):"function"===typeof k.value?Object.defineProperty(g,b,{value:function(){var a=
null;"function"==typeof c[h].set&&c[h].set(this,b,null,null,arguments)&&(a=k.value.apply(this,arguments));"function"===typeof c[h].update&&c[h].update(this,b,null,null,arguments,a);return a},writable:!0,enumerable:!0,configurable:!0}):void 0!==k.value&&k.configurable&&Object.defineProperty(g,b,{get:function(){return k.value},set:function(a){var d=k.value;"function"==typeof c[h].set&&c[h].set(this,b,a,d)&&(k.value=a);"function"===typeof c[h].update&&c[h].update(this,b,a,d)},enumerable:!0,configurable:!0})};
a.injectPrototypes=function(l,b,d){var m=l.prototype,g=l.toString().split(/\s+/)[1].split("{")[0].replace("()",""),k=Object.keys(m),h={},e=function(b){var a=!1,d="false";if("checkbox"===this.type||"radio"===this.type)d=this.checked,a=!0;var e=a?"string"===typeof this.checked?"true"===this.checked?"on":"off":this.checked?"on":"off":this.value;setTimeout(function(){a&&!c[g].set(this,"checked",this.checked,d)?h.checked.set.call(this,d):a&&"function"===typeof c[g].update&&c[g].update(this,"checked",this.checked,
e);this.value=a?"string"===typeof this.checked?"true"===this.checked?"on":"off":this.checked?"on":"off":this.value;c[g].set(this,"value",this.value,e)?"function"===typeof c[g].update&&c[g].update(this,"value",this.value,e):h.value.set.call(this,e)}.bind(this),0)};void 0===c[g]&&(c[g]={obj:l,proto:m,descriptors:{},set:void 0,update:void 0});c[g].set=b;c[g].update=d;-1<k.indexOf("value")&&(Object.defineProperty(m,"kb_removeInputBinding",{value:function(){this.kb_onkeydown=void 0;this.removeEventListener("keydown",
e)},configurable:!0,enumerable:!0}),Object.defineProperty(m,"kb_addInputBinding",{value:function(){this.kb_onkeydown=!0;this.addEventListener("keydown",e)},configurable:!0,enumerable:!0}),Object.defineProperty(m,"kb_removeInputBoxBinding",{value:function(){this.kb_onmousedown=void 0;this.removeEventListener("mouseup",e)},configurable:!0,enumerable:!0}),Object.defineProperty(m,"kb_addInputBoxBinding",{value:function(){this.kb_onmousedown=!0;this.addEventListener("mouseup",e)},configurable:!0,enumerable:!0}));
for(f=0;f<k.length;f+=1)void 0===c[g].descriptors[k[f]]&&a.injectPrototypeProperty(l,k[f]);return a};a.injectedPrototypes=function(){return c};a.addAttrListener=function(c,b){if(this.toString()!==a.toString())return void 0===this.kb_attrListeners[c]&&(this.kb_attrListeners[c]=[]),"function"===typeof b&&this.kb_attrListeners[c].push(b),this;void 0===n[c]&&(n[c]=[]);"function"===typeof b&&n[c].push(b);return a};a.addAttrUpdateListener=function(c,b){if(this.toString()!==a.toString())return void 0===
this.kb_attrUpdateListeners[c]&&(this.kb_attrUpdateListeners[c]=[]),"function"===typeof b&&this.kb_attrUpdateListeners[c].push(b),this;void 0===p[c]&&(p[c]=[]);"function"===typeof b&&p[c].push(b);return a};a.removeAttrListener=function(c,b){if(this.toString()!==a.toString()){if(void 0!==this.kb_attrListeners&&void 0!==this.kb_attrListeners[c]&&"function"===typeof b)for(var d=0;d<this.kb_attrListeners[c].length;d+=1)this.kb_attrListeners[c][d].toString()===b.toString()&&this.kb_attrListeners[c].splice(d,
1);return this}if(void 0!==n[c]&&"function"===typeof b)for(d=0;d<n[c].length;d+=1)n[c][d].toString()===b.toString()&&n[c].splice(d,1);return a};a.removeAttrUpdateListener=function(c,b){if(this.toString()!==a.toString()){if(void 0!==this.kb_attrUpdateListeners&&void 0!==this.kb_attrUpdateListeners[c]&&"function"===typeof b)for(var d=0;d<this.kb_attrUpdateListeners[c].length;d+=1)this.kb_attrUpdateListeners[c][d].toString()===b.toString()&&this.kb_attrUpdateListeners[c].splice(d,1);return this}if(void 0!==
p[c]&&"function"===typeof b)for(d=0;d<p[c].length;d+=1)p[c][d].toString()===b.toString()&&p[c].splice(d,1);return a};return a}"function"===typeof define&&define.amd?(define("KB",q),define([],q)):"object"===typeof module&&module.exports&&(module.exports=q);return q}();
