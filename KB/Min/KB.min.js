var CreateKB=function(){function h(){function a(){var e=function(e,b,a,d,l,c){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=a;this.oldValue=d;this.target=e;this.attr=b;this.arguments=l;this.action=c},d=function(b,a,d,c,l){d=new e(b,a,d,c,l);if(void 0!==g[a])for(c=0;c<g[a].length;c+=1){g[a][c].call(b,d);if(d._stopPropogation)break;if(d._preventDefault)return!1}return!0},b=function(a,d,b,c,l,n){b=new e(a,d,b,c,l,n);if(void 0!==
f[d])for(c=0;c<f[d].length;c+=1){f[d][c].call(a,b);if(b._stopPropogation)break;if(b._preventDefault)return!1}return!0},c=function(){for(var b=0,d=document.getElementsByTagName("INPUT"),b=0;b<k.length;b++)void 0===k[b].parentElement&&(k[b].kb_removeInputBinding(),k.splice(b,1));for(b=0;b<d.length;b++)void 0===d[b].kb_onkeydown&&d[b].kb_addInputBinding()};a.inject(HTMLInputElement,d,b);a.inject(Node,d,b);a.inject(Element,d,b);a.inject(HTMLElement,d,b);a.inject(Document,d,b);a.addAttrUpdateListener("appendChild",
c);a.addAttrUpdateListener("removeChild",c);a.addAttrUpdateListener("innerHTML",c);a.addAttrUpdateListener("outerHTML",c);a.addAttrUpdateListener("innerText",c);a.addAttrUpdateListener("outerText",c);a.addAttrUpdateListener("textContent",c);c()}var g={},f={},h=[],k=[];a.inject=function(e,d,b){var c=e.prototype,g=e.toString().split(/\s+/)[1].split("{")[0].replace("()","");e=Object.keys(c);var f={},k={},m=function(a){var c=this.value;setTimeout(function(){console.log("yay",this.value);d(this,"value",
this.value,c)?"function"===typeof b&&b(this,"value",this.value,c):f.value.set.call(this,c)}.bind(this),0)};if(!(-1<h.indexOf(g))){h.push(g);-1<e.indexOf("value")&&(Object.defineProperty(c,"kb_removeInputBinding",{value:function(){this.kb_onkeydown=void 0;this.removeEventListener("keydown",m)}}),Object.defineProperty(c,"kb_addInputBinding",{value:function(){this.kb_onkeydown=!0;this.addEventListener("keydown",m)}}));for(g=0;g<e.length;g+=1)(function(a){f[a]=Object.getOwnPropertyDescriptor(c,a);void 0!==
f[a].set?Object.defineProperty(c,a,{get:f[a].get,set:function(c){var e=f[a].get.apply(this);d(this,a,c,e)&&f[a].set.apply(this,arguments);"function"===typeof b&&b(this,a,c,e)},enumerable:!0,configurable:!0}):"function"===typeof f[a].value&&(k[a]=f[a].value,c[a]=function(){var c=null;d(this,a,null,null,arguments)&&(c=k[a].apply(this,arguments));"function"===typeof b&&b(this,a,null,null,arguments,c);return c})})(e[g]);return a}};a.injected=function(){return h};a.addAttrListener=function(e,d){void 0===
g[e]&&(g[e]=[]);"function"===typeof d&&g[e].push(d);return a};a.addAttrUpdateListener=function(e,d){void 0===f[e]&&(f[e]=[]);"function"===typeof d&&f[e].push(d);return a};a.removeAttrListener=function(a,d){if(void 0!==g[a]&&"function"===typeof d)for(var b=0;b<g[a].length;b+=1)g[a][b].toString()===d.toString()&&g[a].splice(b,1)};a.removeAttrUpdateListener=function(a,d){if(void 0!==f[a]&&"function"===typeof d)for(var b=0;b<f[a].length;b+=1)f[a][b].toString()===d.toString()&&f[a].splice(b,1)};return a}
"function"===typeof define&&define.amd?(define("KB",h),define([],h)):"object"===typeof module&&module.exports&&(module.exports=h);return h}();
