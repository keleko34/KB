var CreateKB=function(){function n(){function c(){var a=function(){for(var b=0,a=Array.prototype.slice.call(document.getElementsByTagName("INPUT")).filter(function(b){return"radio"!==b.type&&"checkbox"!==b.type}).concat(Array.prototype.slice.call(document.getElementsByTagName("TEXTAREA"))),d=Array.prototype.slice.call(document.getElementsByTagName("INPUT")).filter(function(b){return"radio"===b.type||"checkbox"===b.type}),b=0;b<a.length;b++)void 0===a[b].kb_onkeydown&&a[b].kb_addInputBinding();for(b=
0;b<d.length;b++)void 0===d[b].kb_onmousedown&&d[b].kb_addInputBoxBinding()},d=function(b){var a=new n(b.target,b.arguments[0],"setAttribute"===b.attr?b.arguments[1]:"",b.target.getAttribute(b.arguments[0]),"setAttribute"===b.attr?[b.arguments[1]]:[""]);if(void 0!==k[a.attr])for(g=0;g<k[a.attr].length;g+=1)k[a.attr][g].call(a.target,a),a._stopPropogation&&b.stopPropagation(),a._preventDefault&&b.preventDefault()},e=function(b){var a=new n(b.target,b.arguments[0],"setAttribute"===b.attr?b.arguments[1]:
"",b.target.getAttribute(b.arguments[0]),"setAttribute"===b.attr?[b.arguments[1]]:[""]);if(void 0!==l[a.attr])for(g=0;g<l[a.attr].length;g+=1)l[a.attr][g].call(a.target,a),a._stopPropogation&&b.stopPropagation()},r=Object.keys(f);for(g=0;g<r.length;g++)void 0===f[r[g]].set&&c.injectPrototypes(f[r[g]].obj,p,q);Object.keys(f).forEach(function(a,d){});c.addAttrUpdateListener("appendChild",a);c.addAttrUpdateListener("removeChild",a);c.addAttrUpdateListener("innerHTML",a);c.addAttrUpdateListener("outerHTML",
a);c.addAttrUpdateListener("innerText",a);c.addAttrUpdateListener("outerText",a);c.addAttrUpdateListener("textContent",a);c.addAttrListener("setAttribute",d);c.addAttrListener("removeAttribute",d);c.addAttrUpdateListener("setAttribute",e);c.addAttrUpdateListener("removeAttribute",e);a()}var k={},l={},f={},g,n=function(a,d,e,c,b,f){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=e;this.oldValue=c;this.target=a;this.attr=d;
this.arguments=b;this.action=f},p=function(a,d,e,c,b){e=new n(a,d,e,c,b);c=!0;if(void 0!==k[d])for(g=0;g<k[d].length;g+=1){k[d][g].call(a,e);if(e._stopPropogation)return c;e._preventDefault&&(c=!1)}if(void 0!==a.kb_attrListeners&&void 0!==a.kb_attrListeners[d])for(g=0;g<a.kb_attrListeners[d].length;g+=1){a.kb_attrListeners[d][g].call(a,e);if(e._stopPropogation)break;e._preventDefault&&(c=!1)}return c},q=function(a,d,c,f,b,g){c=new n(a,d,c,f,b,g);f=!0;if(void 0!==l[d])for(b=0;b<l[d].length;b+=1){l[d][b].call(a,
c);if(c._stopPropogation)return f;c._preventDefault&&(f=!1)}if(void 0!==a.kb_attrUpdateListeners&&void 0!==a.kb_attrUpdateListeners[d])for(b=0;b<a.kb_attrUpdateListeners[d].length;b+=1){a.kb_attrUpdateListeners[d][b].call(a,c);if(c._stopPropogation)break;c._preventDefault&&(f=!1)}return f};c.injectPrototypeProperty=function(a,d,e,g){var b=a.prototype,m=Object.getOwnPropertyDescriptor(b,d),h=a.toString().split(/\s+/)[1].split("{")[0].replace("()","");void 0===b.addAttrListener&&void 0===b.kb_attrListeners&&
(b.kb_attrListeners={},b.addAttrListener=c.addAttrListener,b.removeAttrListener=c.removeAttrListener);void 0===b.addAttrUpdateListener&&void 0===b.kb_attrUpdateListeners&&(b.kb_attrUpdateListeners={},b.addAttrUpdateListener=c.addAttrUpdateListener,b.removeAttrUpdateListener=c.removeAttrUpdateListener);void 0===f[h]&&(f[h]={obj:a,proto:b,descriptors:{},set:void 0,update:void 0});f[h].set=void 0!==e?e:f[h].set;f[h].update=void 0!==g?g:f[h].update;f[h].descriptors[d]=m;void 0!==m.set&&m.configurable?
Object.defineProperty(b,d,{get:m.get,set:function(a){var b=m.get.apply(this);"function"==typeof f[h].set&&f[h].set(this,d,a,b,arguments)&&m.set.apply(this,arguments);"function"===typeof f[h].update&&f[h].update(this,d,a,b)},enumerable:!0,configurable:!0}):"function"===typeof m.value?Object.defineProperty(b,d,{value:function(){var a=null;"function"==typeof f[h].set&&f[h].set(this,d,null,null,arguments)&&(a=m.value.apply(this,arguments));"function"===typeof f[h].update&&f[h].update(this,d,null,null,
arguments,a);return a},writable:!0,enumerable:!0,configurable:!0}):void 0!==m.value&&m.configurable&&Object.defineProperty(b,d,{get:function(){return m.value},set:function(a){var b=m.value;"function"==typeof f[h].set&&f[h].set(this,d,a,b)&&(m.value=a);"function"===typeof f[h].update&&f[h].update(this,d,a,b)},enumerable:!0,configurable:!0})};c.injectPrototypes=function(a,d,e){var k=a.prototype,b=a.toString().split(/\s+/)[1].split("{")[0].replace("()",""),m=Object.keys(k),h={},l=function(a){var c=!1,
d="false";if("checkbox"===this.type||"radio"===this.type)d=this.checked,c=!0;var e=c?"string"===typeof this.checked?"true"===this.checked?"on":"off":this.checked?"on":"off":this.value;setTimeout(function(){c&&!f[b].set(this,"checked",this.checked,d)?h.checked.set.call(this,d):c&&"function"===typeof f[b].update&&f[b].update(this,"checked",this.checked,e);this.value=c?"string"===typeof this.checked?"true"===this.checked?"on":"off":this.checked?"on":"off":this.value;f[b].set(this,"value",this.value,
e)?"function"===typeof f[b].update&&f[b].update(this,"value",this.value,e):h.value.set.call(this,e)}.bind(this),0)};void 0===f[b]&&(f[b]={obj:a,proto:k,descriptors:{},set:void 0,update:void 0});f[b].set=d;f[b].update=e;-1<m.indexOf("value")&&(Object.defineProperty(k,"kb_removeInputBinding",{value:function(){this.kb_onkeydown=void 0;this.removeEventListener("keydown",l)},configurable:!0,enumerable:!0}),Object.defineProperty(k,"kb_addInputBinding",{value:function(){this.kb_onkeydown=!0;this.addEventListener("keydown",
l)},configurable:!0,enumerable:!0}),Object.defineProperty(k,"kb_removeInputBoxBinding",{value:function(){this.kb_onmousedown=void 0;this.removeEventListener("mouseup",l)},configurable:!0,enumerable:!0}),Object.defineProperty(k,"kb_addInputBoxBinding",{value:function(){this.kb_onmousedown=!0;this.addEventListener("mouseup",l)},configurable:!0,enumerable:!0}));for(g=0;g<m.length;g+=1)void 0===f[b].descriptors[m[g]]&&c.injectPrototypeProperty(a,m[g]);return c};c.injectedPrototypes=function(){return f};
c.addAttrListener=function(a,d){if(this.toString()!==c.toString())return void 0===this.kb_attrListeners[a]&&(this.kb_attrListeners[a]=[]),"function"===typeof d&&this.kb_attrListeners[a].push(d),this;void 0===k[a]&&(k[a]=[]);"function"===typeof d&&k[a].push(d);return c};c.addAttrUpdateListener=function(a,d){if(this.toString()!==c.toString())return void 0===this.kb_attrUpdateListeners[a]&&(this.kb_attrUpdateListeners[a]=[]),"function"===typeof d&&this.kb_attrUpdateListeners[a].push(d),this;void 0===
l[a]&&(l[a]=[]);"function"===typeof d&&l[a].push(d);return c};c.getAttrListeners=function(){return k};c.getAttrUpdateListeners=function(){return l};c.removeAttrListener=function(a,d){if(this.toString()!==c.toString()){if(void 0!==this.kb_attrListeners&&void 0!==this.kb_attrListeners[a]&&"function"===typeof d)for(var e=0;e<this.kb_attrListeners[a].length;e+=1)this.kb_attrListeners[a][e].toString()===d.toString()&&this.kb_attrListeners[a].splice(e,1);return this}if(void 0!==k[a]&&"function"===typeof d)for(e=
0;e<k[a].length;e+=1)k[a][e].toString()===d.toString()&&k[a].splice(e,1);return c};c.removeAttrUpdateListener=function(a,d){if(this.toString()!==c.toString()){if(void 0!==this.kb_attrUpdateListeners&&void 0!==this.kb_attrUpdateListeners[a]&&"function"===typeof d)for(var e=0;e<this.kb_attrUpdateListeners[a].length;e+=1)this.kb_attrUpdateListeners[a][e].toString()===d.toString()&&this.kb_attrUpdateListeners[a].splice(e,1);return this}if(void 0!==l[a]&&"function"===typeof d)for(e=0;e<l[a].length;e+=
1)l[a][e].toString()===d.toString()&&l[a].splice(e,1);return c};c.injectPrototypes(HTMLInputElement,p,q);c.injectPrototypes(HTMLTextAreaElement,p,q);c.injectPrototypes(Node,p,q);c.injectPrototypes(Element,p,q);c.injectPrototypes(HTMLElement,p,q);c.injectPrototypes(Document,p,q);return c}"function"===typeof define&&define.amd?(define("KB",n),define([],n)):"object"===typeof module&&module.exports&&(module.exports=n);return n}();
