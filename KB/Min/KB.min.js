var CreateKB=function(){function n(){function c(){var a=function(){for(var a=0,b=Array.prototype.slice.call(document.getElementsByTagName("INPUT")).filter(function(a){return"radio"!==a.type&&"checkbox"!==a.type}).concat(Array.prototype.slice.call(document.getElementsByTagName("TEXTAREA"))),d=Array.prototype.slice.call(document.getElementsByTagName("INPUT")).filter(function(a){return"radio"===a.type||"checkbox"===a.type}),a=0;a<b.length;a++)void 0===b[a].kb_onkeydown&&b[a].kb_addInputBinding();for(a=
0;a<d.length;a++)void 0===d[a].kb_onmousedown&&d[a].kb_addInputBoxBinding()},d=function(a){var b=new n(a.target,a.arguments[0],"setAttribute"===a.attr?a.arguments[1]:"",a.target.getAttribute(a.arguments[0]),"setAttribute"===a.attr?[a.arguments[1]]:[""]);if(void 0!==h[b.attr])for(e=0;e<h[b.attr].length;e+=1)h[b.attr][e].call(b.target,b),b._stopPropogation&&a.stopPropagation(),b._preventDefault&&a.preventDefault()},b=function(a){var b=new n(a.target,a.arguments[0],"setAttribute"===a.attr?a.arguments[1]:
"",a.target.getAttribute(a.arguments[0]),"setAttribute"===a.attr?[a.arguments[1]]:[""]);if(void 0!==l[b.attr])for(e=0;e<l[b.attr].length;e+=1)l[b.attr][e].call(b.target,b),b._stopPropogation&&a.stopPropagation()},r=Object.keys(f);for(e=0;e<r.length;e++)void 0===f[r[e]].set&&c.injectPrototypes(f[r[e]].obj,p,q);Object.keys(f).forEach(function(a,b){});c.addAttrUpdateListener("appendChild",a);c.addAttrUpdateListener("removeChild",a);c.addAttrUpdateListener("innerHTML",a);c.addAttrUpdateListener("outerHTML",
a);c.addAttrUpdateListener("innerText",a);c.addAttrUpdateListener("outerText",a);c.addAttrUpdateListener("textContent",a);c.addAttrListener("setAttribute",d);c.addAttrListener("removeAttribute",d);c.addAttrUpdateListener("setAttribute",b);c.addAttrUpdateListener("removeAttribute",b);a()}var h={},l={},f={},e,n=function(a,d,b,c,e,f){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=b;this.oldValue=c;this.target=a;this.attr=d;
this.arguments=e;this.action=f},p=function(a,d,b,c,f){b=new n(a,d,b,c,f);if(void 0!==h["*"])a:for(e=0;e<h["*"].length;e+=1)if(h["*"][e].call(a,b),b._stopPropogation)break a;if(void 0!==h[d]&&!b._stopPropogation)a:for(e=0;e<h[d].length;e+=1)if(h[d][e].call(a,b),b._stopPropogation)break a;if(void 0!==a.kb_attrListeners&&void 0!==a.kb_attrListeners[d]&&!b._stopPropogation)a:for(e=0;e<a.kb_attrListeners[d].length;e+=1)if(a.kb_attrListeners[d][e].call(a,b),b._stopPropogation)break a;return b._preventDefault?
!1:!0},q=function(a,d,b,c,f,e){b=new n(a,d,b,c,f,e);if(void 0!==l["*"])a:for(c=0;c<l["*"].length;c+=1)if(l["*"][c].call(a,b),b._stopPropogation)break a;if(void 0!==l[d])a:for(c=0;c<l[d].length;c+=1)if(l[d][c].call(a,b),b._stopPropogation)break a;if(void 0!==a.kb_attrUpdateListeners&&void 0!==a.kb_attrUpdateListeners[d])a:for(c=0;c<a.kb_attrUpdateListeners[d].length;c+=1)if(a.kb_attrUpdateListeners[d][c].call(a,b),b._stopPropogation)break a;return b._preventDefault?!1:!0};c.injectPrototypeProperty=
function(a,d,b,e){var g=a.prototype,m=Object.getOwnPropertyDescriptor(g,d),k=a.toString().split(/\s+/)[1].split("{")[0].replace("()","");void 0===g.addAttrListener&&void 0===g.kb_attrListeners&&(g.kb_attrListeners={},g.addAttrListener=c.addAttrListener,g.removeAttrListener=c.removeAttrListener);void 0===g.addAttrUpdateListener&&void 0===g.kb_attrUpdateListeners&&(g.kb_attrUpdateListeners={},g.addAttrUpdateListener=c.addAttrUpdateListener,g.removeAttrUpdateListener=c.removeAttrUpdateListener);void 0===
f[k]&&(f[k]={obj:a,proto:g,descriptors:{},set:void 0,update:void 0});f[k].set=void 0!==b?b:f[k].set;f[k].update=void 0!==e?e:f[k].update;f[k].descriptors[d]=m;void 0!==m.set&&m.configurable?Object.defineProperty(g,d,{get:m.get,set:function(a){var b=m.get.apply(this);"function"==typeof f[k].set&&f[k].set(this,d,a,b,arguments)&&m.set.apply(this,arguments);"function"===typeof f[k].update&&f[k].update(this,d,a,b)},enumerable:!0,configurable:!0}):"function"===typeof m.value?Object.defineProperty(g,d,{value:function(){var a=
null;"function"==typeof f[k].set&&f[k].set(this,d,null,null,arguments)&&(a=m.value.apply(this,arguments));"function"===typeof f[k].update&&f[k].update(this,d,null,null,arguments,a);return a},writable:!0,enumerable:!0,configurable:!0}):void 0!==m.value&&m.configurable&&Object.defineProperty(g,d,{get:function(){return m.value},set:function(a){var b=m.value;"function"==typeof f[k].set&&f[k].set(this,d,a,b)&&(m.value=a);"function"===typeof f[k].update&&f[k].update(this,d,a,b)},enumerable:!0,configurable:!0})};
c.injectPrototypes=function(a,d,b){var h=a.prototype,g=a.toString().split(/\s+/)[1].split("{")[0].replace("()",""),m=Object.keys(h),k={},l=function(a){var b=!1,c="false";if("checkbox"===this.type||"radio"===this.type)c=this.checked,b=!0;var d=b?"string"===typeof this.checked?"true"===this.checked?"on":"off":this.checked?"on":"off":this.value;setTimeout(function(){b&&!f[g].set(this,"checked",this.checked,c)?k.checked.set.call(this,c):b&&"function"===typeof f[g].update&&f[g].update(this,"checked",this.checked,
d);this.value=b?"string"===typeof this.checked?"true"===this.checked?"on":"off":this.checked?"on":"off":this.value;f[g].set(this,"value",this.value,d)?"function"===typeof f[g].update&&f[g].update(this,"value",this.value,d):k.value.set.call(this,d)}.bind(this),0)};void 0===f[g]&&(f[g]={obj:a,proto:h,descriptors:{},set:void 0,update:void 0});f[g].set=d;f[g].update=b;-1<m.indexOf("value")&&(Object.defineProperty(h,"kb_removeInputBinding",{value:function(){this.kb_onkeydown=void 0;this.removeEventListener("keydown",
l)},configurable:!0,enumerable:!0}),Object.defineProperty(h,"kb_addInputBinding",{value:function(){this.kb_onkeydown=!0;this.addEventListener("keydown",l)},configurable:!0,enumerable:!0}),Object.defineProperty(h,"kb_removeInputBoxBinding",{value:function(){this.kb_onmousedown=void 0;this.removeEventListener("mouseup",l)},configurable:!0,enumerable:!0}),Object.defineProperty(h,"kb_addInputBoxBinding",{value:function(){this.kb_onmousedown=!0;this.addEventListener("mouseup",l)},configurable:!0,enumerable:!0}));
for(e=0;e<m.length;e+=1)void 0===f[g].descriptors[m[e]]&&c.injectPrototypeProperty(a,m[e]);return c};c.injectedPrototypes=function(){return f};c.addAttrListener=function(a,d){if(this.toString()!==c.toString())return void 0===this.kb_attrListeners[a]&&(this.kb_attrListeners[a]=[]),"function"===typeof d&&this.kb_attrListeners[a].push(d),this;void 0===h[a]&&(h[a]=[]);"function"===typeof d&&h[a].push(d);return c};c.addAttrUpdateListener=function(a,d){if(this.toString()!==c.toString())return void 0===
this.kb_attrUpdateListeners[a]&&(this.kb_attrUpdateListeners[a]=[]),"function"===typeof d&&this.kb_attrUpdateListeners[a].push(d),this;void 0===l[a]&&(l[a]=[]);"function"===typeof d&&l[a].push(d);return c};c.getAttrListeners=function(){return h};c.getAttrUpdateListeners=function(){return l};c.removeAttrListener=function(a,d){if(this.toString()!==c.toString()){if(void 0!==this.kb_attrListeners&&void 0!==this.kb_attrListeners[a]&&"function"===typeof d)for(var b=0;b<this.kb_attrListeners[a].length;b+=
1)this.kb_attrListeners[a][b].toString()===d.toString()&&this.kb_attrListeners[a].splice(b,1);return this}if(void 0!==h[a]&&"function"===typeof d)for(b=0;b<h[a].length;b+=1)h[a][b].toString()===d.toString()&&h[a].splice(b,1);return c};c.removeAttrUpdateListener=function(a,d){if(this.toString()!==c.toString()){if(void 0!==this.kb_attrUpdateListeners&&void 0!==this.kb_attrUpdateListeners[a]&&"function"===typeof d)for(var b=0;b<this.kb_attrUpdateListeners[a].length;b+=1)this.kb_attrUpdateListeners[a][b].toString()===
d.toString()&&this.kb_attrUpdateListeners[a].splice(b,1);return this}if(void 0!==l[a]&&"function"===typeof d)for(b=0;b<l[a].length;b+=1)l[a][b].toString()===d.toString()&&l[a].splice(b,1);return c};c.injectPrototypes(HTMLInputElement,p,q);c.injectPrototypes(HTMLTextAreaElement,p,q);c.injectPrototypes(Node,p,q);c.injectPrototypes(Element,p,q);c.injectPrototypes(HTMLElement,p,q);c.injectPrototypes(Document,p,q);return c}"function"===typeof define&&define.amd?(define("KB",n),define([],function(){return n})):
"object"===typeof module&&module.exports&&(module.exports=n);return n}();
