var CreateKB=function(){function q(){function a(){var p=function(e,r,b,p,a,c){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=b;this.oldValue=p;this.target=e;this.attr=r;this.arguments=a;this.action=c},b=function(e,r,b,a,c){b=new p(e,r,b,a,c);a=!0;if(void 0!==l[r])for(d=0;d<l[r].length;d+=1){l[r][d].call(e,b);if(b._stopPropogation)break;b._preventDefault&&(a=!1)}return a},n=function(e,b,a,c,d,n){a=new p(e,b,a,c,d,n);if(void 0!==
m[b])for(c=0;c<m[b].length;c+=1){m[b][c].call(e,a);if(a._stopPropogation)break;if(a._preventDefault)return!1}return!0},h=function(){for(var e=0,b=document.getElementsByTagName("INPUT"),e=0;e<q.length;e++)void 0===q[e].parentElement&&(q[e].kb_removeInputBinding(),q.splice(e,1));for(e=0;e<b.length;e++)void 0===b[e].kb_onkeydown&&b[e].kb_addInputBinding()},k=function(e){var b=new p(e.target,e.arguments[0],"setAttribute"===e.attr?e.arguments[1]:"",e.target.getAttribute(e.arguments[0]),"setAttribute"===
e.attr?[e.arguments[1]]:[""]);if(void 0!==l[b.attr])for(d=0;d<l[b.attr].length;d+=1)l[b.attr][d].call(b.target,b),b._stopPropogation&&e.stopPropagation(),b._preventDefault&&e.preventDefault()},g=function(b){var a=new p(b.target,b.arguments[0],"setAttribute"===b.attr?b.arguments[1]:"",b.target.getAttribute(b.arguments[0]),"setAttribute"===b.attr?[b.arguments[1]]:[""]);if(void 0!==m[a.attr])for(d=0;d<m[a.attr].length;d+=1)m[a.attr][d].call(a.target,a),a._stopPropogation&&b.stopPropagation()};a.inject(HTMLInputElement,
b,n);a.inject(Node,b,n);a.inject(Element,b,n);a.inject(HTMLElement,b,n);a.inject(Document,b,n);var f=Object.keys(c);for(d=0;d<f.length;d++)void 0===c[f[d]].set&&a.inject(c[f[d]].obj,b,n);Object.keys(c).forEach(function(b,a){});a.addAttrUpdateListener("appendChild",h);a.addAttrUpdateListener("removeChild",h);a.addAttrUpdateListener("innerHTML",h);a.addAttrUpdateListener("outerHTML",h);a.addAttrUpdateListener("innerText",h);a.addAttrUpdateListener("outerText",h);a.addAttrUpdateListener("textContent",
h);a.addAttrListener("setAttribute",k);a.addAttrListener("removeAttribute",k);a.addAttrUpdateListener("setAttribute",g);a.addAttrUpdateListener("removeAttribute",g);h()}var l={},m={},c={},q=[],d;a.injectProperty=function(a,b,d,h){var k=a.prototype,g=Object.getOwnPropertyDescriptor(k,b),f=a.toString().split(/\s+/)[1].split("{")[0].replace("()","");void 0===c[f]&&(c[f]={obj:a,proto:k,descriptors:{},set:void 0,update:void 0});c[f].set=void 0!==d?d:c[f].set;c[f].update=void 0!==h?h:c[f].update;c[f].descriptors[b]=
g;void 0!==g.set&&g.configurable?Object.defineProperty(k,b,{get:g.get,set:function(a){var d=g.get.apply(this);"function"==typeof c[f].set&&c[f].set(this,b,a,d,arguments)&&g.set.apply(this,arguments);"function"===typeof c[f].update&&c[f].update(this,b,a,d)},enumerable:!0,configurable:!0}):"function"===typeof g.value?Object.defineProperty(k,b,{value:function(){var a=null;"function"==typeof c[f].set&&c[f].set(this,b,null,null,arguments)&&(a=g.value.apply(this,arguments));"function"===typeof c[f].update&&
c[f].update(this,b,null,null,arguments,a);return a},writable:!0,enumerable:!0,configurable:!0}):void 0!==g.value&&g.configurable&&Object.defineProperty(k,b,{get:function(){return g.value},set:function(a){var d=g.value;"function"==typeof c[f].set&&c[f].set(this,b,a,d)&&(g.value=a);"function"===typeof c[f].update&&c[f].update(this,b,a,d)},enumerable:!0,configurable:!0})};a.inject=function(p,b,n){var h=p.prototype,k=p.toString().split(/\s+/)[1].split("{")[0].replace("()",""),g=Object.keys(h),f={},e=
function(a){var c=this.value;setTimeout(function(){b(this,"value",this.value,c)?"function"===typeof n&&n(this,"value",this.value,c):f.value.set.call(this,c)}.bind(this),0)};void 0===c[k]&&(c[k]={obj:p,proto:h,descriptors:{},set:void 0,update:void 0});c[k].set=b;c[k].update=n;-1<g.indexOf("value")&&(Object.defineProperty(h,"kb_removeInputBinding",{value:function(){this.kb_onkeydown=void 0;this.removeEventListener("keydown",e)},configurable:!0,enumerable:!0}),Object.defineProperty(h,"kb_addInputBinding",
{value:function(){this.kb_onkeydown=!0;this.addEventListener("keydown",e)},configurable:!0,enumerable:!0}));for(d=0;d<g.length;d+=1)void 0===c[k].descriptors[g[d]]&&a.injectProperty(p,g[d]);return a};a.injected=function(){return c};a.addAttrListener=function(c,b){void 0===l[c]&&(l[c]=[]);"function"===typeof b&&l[c].push(b);return a};a.addAttrUpdateListener=function(c,b){void 0===m[c]&&(m[c]=[]);"function"===typeof b&&m[c].push(b);return a};a.removeAttrListener=function(a,b){if(void 0!==l[a]&&"function"===
typeof b)for(var c=0;c<l[a].length;c+=1)l[a][c].toString()===b.toString()&&l[a].splice(c,1)};a.removeAttrUpdateListener=function(a,b){if(void 0!==m[a]&&"function"===typeof b)for(var c=0;c<m[a].length;c+=1)m[a][c].toString()===b.toString()&&m[a].splice(c,1)};return a}"function"===typeof define&&define.amd?(define("KB",q),define([],q)):"object"===typeof module&&module.exports&&(module.exports=q);return q}();
