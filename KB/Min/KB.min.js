var CreateKB=function(){function m(){function c(){var a=function(){for(var e=0,a=Array.prototype.slice.call(document.getElementsByTagName("INPUT")).filter(function(a){return"radio"!==a.type&&"checkbox"!==a.type}).concat(Array.prototype.slice.call(document.getElementsByTagName("TEXTAREA"))),b=Array.prototype.slice.call(document.getElementsByTagName("INPUT")).filter(function(a){return"radio"===a.type||"checkbox"===a.type}),e=0;e<a.length;e++)void 0===a[e].kb_onkeydown&&a[e].kb_addInputBinding();for(e=
0;e<b.length;e++)void 0===b[e].kb_onmousedown&&b[e].kb_addInputBoxBinding()},d=function(a){var b=new m(a.target,a.arguments[0],"setAttribute"===a.attr?a.arguments[1]:"",a.target.getAttribute(a.arguments[0]),"setAttribute"===a.attr?[a.arguments[1]]:[""]);if(void 0!==g[b.attr])for(f=0;f<g[b.attr].length;f+=1)g[b.attr][f].call(b.target,b),b._stopPropogation&&a.stopPropagation(),b._preventDefault&&a.preventDefault()},b=function(a){var b=new m(a.target,a.arguments[0],"setAttribute"===a.attr?a.arguments[1]:
"",a.target.getAttribute(a.arguments[0]),"setAttribute"===a.attr?[a.arguments[1]]:[""]);if(void 0!==l[b.attr])for(f=0;f<l[b.attr].length;f+=1)l[b.attr][f].call(b.target,b),b._stopPropogation&&a.stopPropagation()},q=Object.keys(h);for(f=0;f<q.length;f++)void 0===h[q[f]].set&&c.injectPrototypes(h[q[f]].obj,n,p);c.addAttrUpdateListener("appendChild",a);c.addAttrUpdateListener("removeChild",a);c.addAttrUpdateListener("innerHTML",a);c.addAttrUpdateListener("outerHTML",a);c.addAttrUpdateListener("innerText",
a);c.addAttrUpdateListener("outerText",a);c.addAttrUpdateListener("textContent",a);c.addAttrListener("setAttribute",d);c.addAttrListener("removeAttribute",d);c.addAttrUpdateListener("setAttribute",b);c.addAttrUpdateListener("removeAttribute",b);a()}var g={},l={},h={},f,m=function(a,d,b,c,e,f){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=b;this.oldValue=c;this.target=a;this.attr=d;this.arguments=e;this.action=f},n=function(a,
d,b,c,e){b=new m(a,d,b,c,e);if(void 0!==g["*"])a:for(f=0;f<g["*"].length;f+=1)if(g["*"][f].call(a,b),b._stopPropogation)break a;if(void 0!==g[d]&&!b._stopPropogation)a:for(f=0;f<g[d].length;f+=1)if(g[d][f].call(a,b),b._stopPropogation)break a;if(void 0!==a.kb_attrListeners&&void 0!==a.kb_attrListeners()[d]&&!b._stopPropogation)a:for(f=0;f<a.kb_attrListeners()[d].length;f+=1)if(a.kb_attrListeners()[d][f].call(a,b),b._stopPropogation)break a;return b._preventDefault?!1:!0},p=function(a,d,b,c,e,f){b=
new m(a,d,b,c,e,f);if(void 0!==l["*"])a:for(c=0;c<l["*"].length;c+=1)if(l["*"][c].call(a,b),b._stopPropogation)break a;if(void 0!==l[d])a:for(c=0;c<l[d].length;c+=1)if(l[d][c].call(a,b),b._stopPropogation)break a;if(void 0!==a.kb_attrUpdateListeners&&void 0!==a.kb_attrUpdateListeners[d])a:for(c=0;c<a.kb_attrUpdateListeners[d].length;c+=1)if(a.kb_attrUpdateListeners[d][c].call(a,b),b._stopPropogation)break a;return b._preventDefault?!1:!0};c.injectPrototypeProperty=function(a,d,b,f,e){var k=a.prototype,
g=Object.getOwnPropertyDescriptor(k,d);e=e||a.toString().split(/\s+/)[1].split("{")[0].replace("()","");void 0===k.addAttrListener&&void 0===k.kb_attrListeners&&(k.kb_attrListeners=function(){void 0===this._kb_attrListeners&&(this._kb_attrListeners={});return this._kb_attrListeners},k.addAttrListener=c.addAttrListener,k.removeAttrListener=c.removeAttrListener);void 0===k.addAttrUpdateListener&&void 0===k.kb_attrUpdateListeners&&(k.kb_attrUpdateListeners=function(){void 0===this._kb_attrUpdateListeners&&
(this._kb_attrUpdateListeners={});return this._kb_attrUpdateListeners},k.addAttrUpdateListener=c.addAttrUpdateListener,k.removeAttrUpdateListener=c.removeAttrUpdateListener);void 0===h[e]&&(h[e]={obj:a,proto:k,descriptors:{},set:void 0,update:void 0});h[e].set=b?b:h[e].set;h[e].update=f?f:h[e].update;h[e].descriptors[d]=g;void 0!==g.set&&g.configurable?Object.defineProperty(k,d,{get:g.get,set:function(a){var b=g.get.apply(this);"function"==typeof h[e].set&&h[e].set(this,d,a,b,arguments)&&g.set.apply(this,
arguments);"function"===typeof h[e].update&&h[e].update(this,d,a,b)},enumerable:!0,configurable:!0}):"function"===typeof g.value?Object.defineProperty(k,d,{value:function(){var a=null;"function"==typeof h[e].set&&h[e].set(this,d,null,null,arguments)&&(a=g.value.apply(this,arguments));"function"===typeof h[e].update&&h[e].update(this,d,null,null,arguments,a);return a},writable:!0,enumerable:!0,configurable:!0}):void 0!==g.value&&g.configurable&&Object.defineProperty(k,d,{get:function(){return g.value},
set:function(a){var b=g.value;"function"==typeof h[e].set&&h[e].set(this,d,a,b)&&(g.value=a);"function"===typeof h[e].update&&h[e].update(this,d,a,b)},enumerable:!0,configurable:!0})};c.injectPrototypes=function(a,d,b){var g=a.prototype,e=a.toString().split(/\s+/)[1].split("{")[0].replace("()",""),k=Object.getOwnPropertyNames(g),l={},m=function(a){var b=!1,c="false";if("checkbox"===this.type||"radio"===this.type)c=this.checked,b=!0;var d=b?"string"===typeof this.checked?"true"===this.checked?"on":
"off":this.checked?"on":"off":this.value;setTimeout(function(){b&&!h[e].set(this,"checked",this.checked,c)?l.checked.set.call(this,c):b&&"function"===typeof h[e].update&&h[e].update(this,"checked",this.checked,d);this.value=b?"string"===typeof this.checked?"true"===this.checked?"on":"off":this.checked?"on":"off":this.value;h[e].set(this,"value",this.value,d)?"function"===typeof h[e].update&&h[e].update(this,"value",this.value,d):l.value.set.call(this,d)}.bind(this),0)};void 0===h[e]&&(h[e]={obj:a,
proto:g,descriptors:{},set:void 0,update:void 0});h[e].set=d||n;h[e].update=b||p;-1<k.indexOf("value")&&(Object.defineProperty(g,"kb_removeInputBinding",{value:function(){this.kb_onkeydown=void 0;this.removeEventListener("keydown",m)},configurable:!0,enumerable:!0}),Object.defineProperty(g,"kb_addInputBinding",{value:function(){this.kb_onkeydown=!0;this.addEventListener("keydown",m)},configurable:!0,enumerable:!0}),Object.defineProperty(g,"kb_removeInputBoxBinding",{value:function(){this.kb_onmousedown=
void 0;this.removeEventListener("mouseup",m)},configurable:!0,enumerable:!0}),Object.defineProperty(g,"kb_addInputBoxBinding",{value:function(){this.kb_onmousedown=!0;this.addEventListener("mouseup",m)},configurable:!0,enumerable:!0}));for(f=0;f<k.length;f+=1)void 0===h[e].descriptors[k[f]]&&c.injectPrototypeProperty(a,k[f],null,null,e);return c};c.injectedPrototypes=function(){return h};c.addAttrListener=function(a,d){if(this.toString()!==c.toString())return void 0===this.kb_attrListeners()[a]&&
(this.kb_attrListeners()[a]=[]),"function"===typeof d&&this.kb_attrListeners()[a].push(d),this;void 0===g[a]&&(g[a]=[]);"function"===typeof d&&g[a].push(d);return c};c.addAttrUpdateListener=function(a,d){if(this.toString()!==c.toString())return void 0===this.kb_attrUpdateListeners()[a]&&(this.kb_attrUpdateListeners()[a]=[]),"function"===typeof d&&this.kb_attrUpdateListeners()[a].push(d),this;void 0===l[a]&&(l[a]=[]);"function"===typeof d&&l[a].push(d);return c};c.getAttrListeners=function(){return g};
c.getAttrUpdateListeners=function(){return l};c.removeAttrListener=function(a,d){if(this.toString()!==c.toString()){if(void 0!==this.kb_attrListeners&&void 0!==this.kb_attrListeners()[a]&&"function"===typeof d)for(var b=0;b<this.kb_attrListeners()[a].length;b+=1)this.kb_attrListeners()[a][b].toString()===d.toString()&&this.kb_attrListeners()[a].splice(b,1);return this}if(void 0!==g[a]&&"function"===typeof d)for(b=0;b<g[a].length;b+=1)g[a][b].toString()===d.toString()&&g[a].splice(b,1);return c};c.removeAttrUpdateListener=
function(a,d){if(this.toString()!==c.toString()){if(void 0!==this.kb_attrUpdateListeners&&void 0!==this.kb_attrUpdateListeners()[a]&&"function"===typeof d)for(var b=0;b<this.kb_attrUpdateListeners()[a].length;b+=1)this.kb_attrUpdateListeners()[a][b].toString()===d.toString()&&this.kb_attrUpdateListeners()[a].splice(b,1);return this}if(void 0!==l[a]&&"function"===typeof d)for(b=0;b<l[a].length;b+=1)l[a][b].toString()===d.toString()&&l[a].splice(b,1);return c};c.injectPrototypes(HTMLInputElement,n,
p);c.injectPrototypes(HTMLTextAreaElement,n,p);c.injectPrototypes(Node,n,p);c.injectPrototypes(Element,n,p);c.injectPrototypes(HTMLElement,n,p);c.injectPrototypes(Document,n,p);return c}"function"===typeof define&&define.amd?(define("KB",m),define([],function(){return m})):"object"===typeof module&&module.exports&&(module.exports=m);return m}();
