var CreateKB=function(){function w(){function d(){function a(a){var c=a.arguments[0];if("appendChild"!==a.attr||"SCRIPT"!==c.tagName&&"LINK"!==c.tagName){if("outerHTML"===a.attr||"outerText"===a.attr)a.target=a.target.parentElement;var k=0,k=a.target,d="appendChild"!==a.attr?k.getElementsByTagName("INPUT"):a.arguments[0].getElementsByTagName("INPUT"),c="appendChild"!==a.attr?k.getElementsByTagName("TEXTAREA"):a.arguments[0].getElementsByTagName("TEXTAREA"),c=e(d,c,a),d=b(d,a),h=[],k="appendChild"!==
a.attr?k.querySelectorAll("*"):a.arguments[0].querySelectorAll("*"),f=k.length,g,n=0;for(g=0;g<f;g++)3!==k[g].nodeType&&8!==k[g].nodeType&&(h[n]=k[g],n++);"appendChild"===a.attr&&(k=a.arguments[0].nodeType,3!==k&&8!==k&&(h[h.length]=a.arguments[0]));for(k=0;k<c.length;k++)c[k].kb_addInputBinding();for(k=0;k<d.length;k++)d[k].kb_addInputBoxBinding();p(h)}else a.stopPropagation()}function e(a,b,c){var e=a.length,d=b.length,h=[],f,g=0;for(f=0;f<e;f++){var p=a[f].type;"radio"!==p&&"checkbox"!==p&&void 0===
a[f].kb_onkeydown&&void 0===a[f].kb_onmousedown&&(h[g]=a[f],g++)}for(f=0;f<d;f++)h[g]=b[f],g++;"appendChild"===c.attr&&(a=c.arguments[0],b=a.tagName,"INPUT"===b&&"checkbox"!==a.type&&"radio"!==a.type||"TEXTAREA"===b)&&(h[h.length]=a);return h}function b(a,b){var c=a.length,e=[],d,f=0;for(d=0;d<c;d++){var h=a[d].type;if("radio"===h||"checkbox"===h&&void 0===a[d].kb_onkeydown&&void 0===a[d].kb_onmousedown)e[f]=a[d],f++}"appendChild"===b.attr&&(c=b.arguments[0],"INPUT"===c.tagName&&"checkbox"===c.type&&
"radio"===c.type&&(e[e.length]=c));return e}function p(a){for(var b=a.length,c=x.length,e=0;e<b;e++)for(var f=0;f<c;f++)d.injectStyle(a[e],x[f],q,r)}function f(a){var b=a.target.attributes[a.arguments[0]],c="setAttribute"===a.attr?a.arguments[1]:"";q(a.target,a.arguments[0],c,void 0!==b?b.value:"",[c])||a.preventDefault()}function c(a){var b=a.target.attributes[a.arguments[0]],c="setAttribute"===a.attr?a.arguments[1]:"";r(a.target,a.arguments[0],c,void 0!==b?b.value:"",[c])}var h=Object.keys(n);for(g=
0;g<h.length;g++)void 0===n[h[g]].set&&d.injectPrototypes(n[h[g]].obj,q,r);d.addAttrUpdateListener("appendChild",a);d.addAttrUpdateListener("removeChild",a);d.addAttrUpdateListener("innerHTML",a);d.addAttrUpdateListener("outerHTML",a);d.addAttrUpdateListener("innerText",a);d.addAttrUpdateListener("outerText",a);d.addAttrUpdateListener("textContent",a);d.addAttrListener("setAttribute",f);d.addAttrListener("removeAttribute",f);d.addAttrUpdateListener("setAttribute",c);d.addAttrUpdateListener("removeAttribute",
c);p(document.all);(function(){for(var a=0,a=document.getElementsByTagName("INPUT"),c=document.getElementsByTagName("TEXTAREA"),d={attr:"initial"},c=e(a,c,d),d=b(a,d),a=0;a<c.length;a++)c[a].kb_addInputBinding();for(a=0;a<d.length;a++)d[a].kb_addInputBoxBinding()})()}function w(a,e){d.addAttrListener.call(this,a,e,!0)}function A(a,e){d.addAttrUpdateListener.call(this,a,e,!0)}var t={},u={},n={},x=Object.getOwnPropertyNames(document.all[0].style),g,v,y=function(a,e,b){var d=[],f=0;b=b?"kb_childAttrUpdateListeners":
"kb_childAttrListeners";for(f=0;null!==a;)a=a.parentElement,null!==a&&void 0!==a[b]()[e]&&(d[f]=a,f++);return d},z=function(a,e,b,d,f,c,h){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=b;this.oldValue=d;this.target=a;this.attr=e;this.arguments=f;this.action=c;this.child=void 0;this.type=h},q=function(a,e,b,d,f){b=new z(a,e,b,d,f,"set");d=void 0!==a.parentElement?y(a,e):[];f=d.length;var c=t["*"],h,l=t[e],m=void 0!==a.kb_attrListeners?
a.kb_attrListeners()[e]:void 0;if(void 0!==c)a:for(h=c.length,g=0;g<h;g+=1)if(c[g].call(a,b),void 0!==b._stopPropogation)break a;if(void 0!==l&&void 0===b._stopPropogation)a:for(c=l.length,g=0;g<c;g+=1)if(l[g].call(a,b),void 0!==b._stopPropogation)break a;if(void 0!==m&&void 0===b._stopPropogation)a:for(l=m.length,g=0;g<l;g+=1)if(m[g].call(a,b),void 0!==b._stopPropogation)break a;if(0<f&&void 0===b._stopPropogation)a:for(g=0;g<f;g++)if(m=d[g],l=m.kb_childAttrListeners()[e],void 0!==l)for(c=l.length,
v=0;v<c;v++)if(b.child=a,b.target=m,l[v].call(m,b),void 0!==b._stopPropogation)break a;return void 0!==b._preventDefault?!1:!0},r=function(a,d,b,g,f,c){b=new z(a,d,b,g,f,c,"update");g=void 0!==a.parentElement?y(a,d,!0):[];f=g.length;var h=u["*"],l,m=u[d],k=void 0!==a.kb_attrUpdateListeners?a.kb_attrUpdateListeners()[d]:void 0;if(void 0!==h)a:for(l=h.length,c=0;c<l;c+=1)if(h[c].call(a,b),void 0!==b._stopPropogation)break a;if(void 0!==m&&void 0===b._stopPropogation)a:for(h=m.length,c=0;c<h;c+=1)if(m[c].call(a,
b),void 0!==b._stopPropogation)break a;if(void 0!==k&&void 0===b._stopPropogation)a:for(m=k.length,c=0;c<m;c+=1)if(k[c].call(a,b),void 0!==b._stopPropogation)break a;if(0<f&&void 0===b._stopPropogation)a:for(c=0;c<f;c++)if(k=g[c],m=k.kb_childAttrUpdateListeners()[d],void 0!==m)for(h=m.length,v=0;v<h;v++)if(b.child=a,b.target=k,m[v].call(k,b),void 0!==b._stopPropogation)break a;return void 0!==b._preventDefault?!1:!0};d.injectPrototypeProperty=function(a,e,b,g,f){var c=a.prototype,h=Object.getOwnPropertyDescriptor(c,
e);f=f||a.toString().split(/\s+/)[1].split("{")[0].replace("()","");var l=n[f];void 0===c.addAttrListener&&void 0===c.kb_attrListeners&&(c.kb_attrListeners=function(){void 0===this._kb_attrListeners&&(this._kb_attrListeners={});return this._kb_attrListeners},c.addAttrListener=d.addAttrListener,c.removeAttrListener=d.removeAttrListener);c.hasOwnProperty("children")&&void 0===c.addChildAttrListener&&void 0===c.kb_childAttrListeners&&(c.kb_childAttrListeners=function(){void 0===this._kb_childAttrListeners&&
(this._kb_childAttrListeners={});return this._kb_childAttrListeners},c.addChildAttrListener=w,c.getchildAttrListeners=function(){return this.kb_childAttrListeners()});void 0===c.addAttrUpdateListener&&void 0===c.kb_attrUpdateListeners&&(c.kb_attrUpdateListeners=function(){void 0===this._kb_attrUpdateListeners&&(this._kb_attrUpdateListeners={});return this._kb_attrUpdateListeners},c.addAttrUpdateListener=d.addAttrUpdateListener,c.removeAttrUpdateListener=d.removeAttrUpdateListener);c.hasOwnProperty("children")&&
void 0===c.addChildAttrUpdateListener&&void 0===c.kb_childAttrUpdateListeners&&(c.kb_childAttrUpdateListeners=function(){void 0===this._kb_childAttrUpdateListeners&&(this._kb_childAttrUpdateListeners={});return this._kb_childAttrUpdateListeners},c.addChildAttrUpdateListener=A,c.getchildAttrUpdateListeners=function(){return this.kb_childAttrUpdateListeners()});void 0===l&&(n[f]={obj:a,proto:c,descriptors:{},set:void 0,update:void 0},l=n[f]);l.set=b?b:n[f].set;l.update=g?g:n[f].update;l.descriptors[e]=
h;void 0!==h.set&&h.configurable?Object.defineProperty(c,e,{get:h.get,set:function(a){var b=h.get.apply(this),c=l.set,d=l.update;"function"===typeof c&&c(this,e,a,b,arguments)&&h.set.apply(this,arguments);"function"===typeof d&&d(this,e,a,b,arguments)},enumerable:!0,configurable:!0}):"function"===typeof h.value?Object.defineProperty(c,e,{value:function(){var a=null,b=l.set,c=l.update;"function"===typeof b&&b(this,e,null,null,arguments)&&(a=h.value.apply(this,arguments));"function"===typeof c&&c(this,
e,null,null,arguments,a);return a},writable:!0,enumerable:!0,configurable:!0}):void 0!==h.value&&h.configurable&&Object.defineProperty(c,e,{get:function(){return h.value},set:function(a){var b=h.value,c=l.set,d=l.update;"function"===typeof c&&c(this,e,a,b)&&(h.value=a);"function"===typeof d&&d(this,e,a,b)},enumerable:!0,configurable:!0})};d.injectPrototypes=function(a,e,b){var p=a.prototype,f=a.toString().split(/\s+/)[1].split("{")[0].replace("()",""),c=n[f],h=Object.getOwnPropertyNames(p),l={},m=
function(a){var b=!1,d="false";if("checkbox"===this.type||"radio"===this.type)d=this.checked,b=!0;var e=b?"string"===typeof this.checked?"true"===this.checked?"on":"off":this.checked?"on":"off":this.value;setTimeout(function(){var a=c.set,f=c.update;b&&!a(this,"checked",this.checked,d)?l.checked.set.call(this,d):b&&"function"===typeof f&&f(this,"checked",this.checked,e);this.value=b?"string"===typeof this.checked?"true"===this.checked?"on":"off":this.checked?"on":"off":this.value;a(this,"value",this.value,
e)?"function"===typeof f&&f(this,"value",this.value,e):l.value.set.call(this,e)}.bind(this),0)};void 0===c&&(n[f]={obj:a,proto:p,descriptors:{},set:void 0,update:void 0},c=n[f]);c.set=e||q;c.update=b||r;-1<h.indexOf("value")&&(Object.defineProperty(p,"kb_removeInputBinding",{value:function(){this.kb_onkeydown=void 0;this.removeEventListener("keydown",m)},configurable:!0,enumerable:!0}),Object.defineProperty(p,"kb_addInputBinding",{value:function(){this.kb_onkeydown=!0;this.addEventListener("keydown",
m)},configurable:!0,enumerable:!0}),Object.defineProperty(p,"kb_removeInputBoxBinding",{value:function(){this.kb_onmousedown=void 0;this.removeEventListener("mouseup",m)},configurable:!0,enumerable:!0}),Object.defineProperty(p,"kb_addInputBoxBinding",{value:function(){this.kb_onmousedown=!0;this.addEventListener("mouseup",m)},configurable:!0,enumerable:!0}));for(g=0;g<h.length;g+=1)void 0===n[f].descriptors[h[g]]&&d.injectPrototypeProperty(a,h[g],null,null,f);return d};d.injectStyle=function(a,e,
b,g){var f=Object.getOwnPropertyDescriptor(a.style,e),c=a.style;void 0===a.style.kb_bind&&(a.style.kb_bind={obj:a,proto:c,descriptors:{},set:void 0,update:void 0});a.style.kb_bind.set=b?b:n[_injectName].set;a.style.kb_bind.update=g?g:n[_injectName].update;a.style.kb_bind.descriptors[e]=f;void 0!==f.value&&f.configurable&&Object.defineProperty(c,e,{get:function(){return f.value},set:function(b){var c=f.value;"function"==typeof a.style.kb_bind.set&&a.style.kb_bind.set(a,e,b,c)&&(f.value=b,a.style.setProperty(e.replace(/([A-Z])/g,
"-$1").replace("webkit","-webkit"),b));"function"===typeof a.style.kb_bind.update&&a.style.kb_bind.update(a,e,b,c)},enumerable:!0,configurable:!0});return d};d.injectedPrototypes=function(){return n};d.addAttrListener=function(a,e,b){if(this.toString()!==d.toString())return void 0===this.kb_attrListeners()[a]&&(this.kb_attrListeners()[a]=[]),b&&void 0===this.kb_childAttrListeners()[a]&&(this.kb_childAttrListeners()[a]=[]),"function"===typeof e&&(b?this.kb_childAttrListeners()[a].push(e):this.kb_attrListeners()[a].push(e)),
this;void 0===t[a]&&(t[a]=[]);"function"===typeof e&&t[a].push(e);return d};d.addAttrUpdateListener=function(a,e,b){if(this.toString()!==d.toString())return void 0===this.kb_attrUpdateListeners()[a]&&(this.kb_attrUpdateListeners()[a]=[]),b&&void 0===this.kb_childAttrUpdateListeners()[a]&&(this.kb_childAttrUpdateListeners()[a]=[]),"function"===typeof e&&(b?this.kb_childAttrUpdateListeners()[a].push(e):this.kb_attrUpdateListeners()[a].push(e)),this;void 0===u[a]&&(u[a]=[]);"function"===typeof e&&u[a].push(e);
return d};d.getAttrListeners=function(){return this.toString()!==d.toString()?this.kb_attrListeners():t};d.getAttrUpdateListeners=function(){return this.toString()!==d.toString()?this.kb_attrUpdateListeners():u};d.removeAttrListener=function(a,e){if(this.toString()!==d.toString()){if(void 0!==this.kb_attrListeners&&void 0!==this.kb_attrListeners()[a]&&"function"===typeof e){for(var b=0;b<this.kb_attrListeners()[a].length;b+=1)this.kb_attrListeners()[a][b].toString()===e.toString()&&this.kb_attrListeners()[a].splice(b,
1);if(void 0!==this.kb_childAttrListeners()[a])for(b=0;b<this.kb_childAttrListeners()[a].length;b+=1)this.kb_childAttrListeners()[a][b].toString()===e.toString()&&this.kb_childAttrListeners()[a].splice(b,1)}return this}if(void 0!==t[a]&&"function"===typeof e)for(b=0;b<t[a].length;b+=1)t[a][b].toString()===e.toString()&&t[a].splice(b,1);return d};d.removeAttrUpdateListener=function(a,e){if(this.toString()!==d.toString()){if(void 0!==this.kb_attrUpdateListeners&&void 0!==this.kb_attrUpdateListeners()[a]&&
"function"===typeof e){for(var b=0;b<this.kb_attrUpdateListeners()[a].length;b+=1)this.kb_attrUpdateListeners()[a][b].toString()===e.toString()&&this.kb_attrUpdateListeners()[a].splice(b,1);if(void 0!==this.kb_childAttrUpdateListeners()[a])for(b=0;b<this.kb_childAttrUpdateListeners()[a].length;b+=1)this.kb_childAttrUpdateListeners()[a][b].toString()===e.toString()&&this.kb_childAttrUpdateListeners()[a].splice(b,1)}return this}if(void 0!==u[a]&&"function"===typeof e)for(b=0;b<u[a].length;b+=1)u[a][b].toString()===
e.toString()&&u[a].splice(b,1);return d};d.injectPrototypes(Node,q,r);d.injectPrototypes(Element,q,r);d.injectPrototypes(HTMLElement,q,r);d.injectPrototypes(HTMLInputElement,q,r);d.injectPrototypes(HTMLTextAreaElement,q,r);d.injectPrototypes(Document,q,r);return d}"function"===typeof define&&define.amd?(define("KB",w),define([],function(){return w})):"object"===typeof module&&module.exports&&(module.exports=w);return w}();
