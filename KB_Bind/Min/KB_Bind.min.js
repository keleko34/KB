var CreateKB_Bind=function(){function k(){function c(){var a=c.SearchAllTextNodes("{{"),b=c.SearchAllAttributes("}}");a.forEach(function(a,b){f.push(k().startBind("{{").endBind("}}"));f[f.length-1].call()});b.forEach(function(a,b){g.push(k().startBind("{{").endBind("}}").isAttr(!0));g[g.length-1].call()});q.forEach(function(a,b){m.removeAttrUpdateListener(a,n);m.addAttrUpdateListener(a,n)});c.getAllAttributeTypes().forEach(function(a,b){m.removeAttrUpdateListener(a,n);m.addAttrUpdateListener(a,n)})}
(function(){return function(){return function(){}}})();var k=function(){return function(){function a(a){}var b={},h=[],c=[],l=!1,e="{{",d="}}";a.startBind=function(b){if(void 0===b)return e;e="string"===typeof b?b:e;return a};a.endBind=function(b){if(void 0===b)return d;d="string"===typeof b?b:d;return a};a.node=function(){return b};a.Binds=function(){return h};a.initialText=function(){return""};a.initialTextSplit=function(){return c};a.isAttr=function(b){if(void 0===b)return l;l=!!b;return a};a.getBindById=
function(b){return h.map(function(a,h){return a.bindName()!==b?null:a}).filter(function(b,a){return null!==b})};a.updateCheck=function(){h.forEach(function(b,a){b.call()})};return a}}(),f=[],g=[],p={},m=function(){function a(){function b(){var l=function(a,b,l,c,e){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=l;this.oldValue=c;this.target=a;this.attr=b;this.arguments=e},e=function(b,c,e,d,r){e=new l(b,c,e,d,r);if(void 0!==
a[c])for(d=0;d<a[c].length;d+=1){a[c][d].call(b,e);if(e._stopPropogation)break;if(e._preventDefault)return!1}return!0},d=function(a,b,e,d,h){e=new l(a,b,e,d,h);if(void 0!==c[b])for(d=0;d<c[b].length;d+=1){c[b][d].call(a,e);if(e._stopPropogation)break;if(e._preventDefault)return!1}return!0};b.inject(Node,e,d);b.inject(Element,e,d);b.inject(HTMLElement,e,d);b.inject(Document,e,d)}var a={},c={};b.inject=function(a,c,d){var h=a.prototype;a=Object.keys(h);var g,f={},k={};for(g=0;g<a.length;g+=1)(function(a){f[a]=
Object.getOwnPropertyDescriptor(h,a);void 0!==f[a].set?Object.defineProperty(h,a,{get:f[a].get,set:function(b){var h=f[a].get.apply(this);c(this,a,b,h)&&f[a].set.apply(this,arguments);"function"===typeof d&&d(this,a,b,h)},enumerable:!0,configurable:!0}):"function"===typeof f[a].value&&(k[a]=f[a].value,h[a]=function(){var b=null;c(this,a,null,null,arguments)&&(b=k[a].apply(this,arguments));"function"===typeof d&&d(this,a,null,null,arguments,b);return b})})(a[g]);return b};b.addAttrListener=function(c,
e){void 0===a[c]&&(a[c]=[]);"function"===typeof e&&a[c].push(e);return b};b.addAttrUpdateListener=function(a,e){void 0===c[a]&&(c[a]=[]);"function"===typeof e&&c[a].push(e);return b};b.removeAttrListener=function(b,c){if(void 0!==a[b]&&"function"===typeof c)for(var d=0;d<a[b].length;d+=1)a[b][d].toString()===c.toString()&&a[b].splice(d,1)};b.removeAttrUpdateListener=function(a,b){if(void 0!==c[a]&&"function"===typeof b)for(var d=0;d<c[a].length;d+=1)c[a][d].toString()===b.toString()&&c[a].splice(d,
1)};return b}"function"===typeof define&&define.amd?(define("KB",a),define([],a)):"object"===typeof module&&module.exports&&(module.exports=a);return a}()(),q="innerHTML textContent innerText outerHTML outerText appendChild removeChild".split(" "),n=function(a){c.updateUnsynced();c();-1<q.indexOf(a.attr)?f.forEach(function(a,c){a.updateCheck()}):g.forEach(function(a,c){a.updateCheck()})};c.textBinds=function(){return f};c.attributeBinds=function(){return g};c.pipedAttributes=function(){return p};
c.addPipedAttribute=function(a,b){"string"===typeof a&&"function"===typeof b&&(p[a]=b)};c.removePipedAttribute=function(a){void 0!==p[a]&&(p[a]=void 0)};c.SearchAllTextNodes=function(a){var b=!1;return Array.prototype.concat.apply([],Array.prototype.slice.call(document.all).map(function(c,f){"BODY"===c.nodeName&&(b=!0);return b?Array.prototype.concat.apply([],Array.prototype.slice.call(c.childNodes).filter(function(b,c){return"#text"===b.nodeName&&-1<b.textContent.indexOf(a)})):null}).filter(function(a,
b){return null!==a}))};c.SearchAllAttributes=function(a){var b=!1;return Array.prototype.concat.apply([],Array.prototype.slice.call(document.all).map(function(c,f){"BODY"===c.nodeName&&(b=!0);return b?Array.prototype.concat.apply([],Array.prototype.slice.call(c.attributes).filter(function(b,c){return-1<b.value.indexOf(a)})):null}).filter(function(a,b){return null!==a}))};c.getBindsById=function(a){return Array.prototype.concat.apply([],f.map(function(b,c){return b.getBindById(a)}).filter(function(a,
c){return 0<a.length}).concat(g.map(function(b,c){return b.getBindById(a)}).filter(function(a,c){return 0<a.length})))};c.updateBindsById=function(a,b){c.getBindsById(a).forEach(function(a,c){a.value(b).call()})};c.updateUnsynced=function(){f=f.map(function(a,b){return null===a.node().parentElement?null:a}).filter(function(a,b){return null!==a});g=g.map(function(a,b){return null===a.node().parentElement?null:a}).filter(function(a,b){return null!==a});return c};c.getAllAttributeTypes=function(){return Array.prototype.concat.apply([],
g.map(function(a,b){return Array.prototype.slice.call(a.node().attributes)})).filter(function(a,b,c){return c.indexOf(a)===b})};return c}"function"===typeof define&&define.amd?(define("KB_Bind",k),define([],k)):"object"===typeof module&&module.exports&&(module.exports=k);return k}();
